import{_ as C,b as U,c as B}from"./Pagination.pdtMRfTz.js";import{z as h,a as j,_ as F}from"./index._7kVnJzd.js";import{m as N,a8 as S,n as z,r as G,g as P,c as $,b as s,w as i,a as l,h as a,a3 as q,o as D,d as H,a4 as R}from"./entry.B-VYVz6_.js";import{_ as A}from"./Card.CNSOZQ4O.js";import{c as E}from"./csvToJson.BcU0GOzl.js";const I={class:"flex h-full flex-col gap-3 w-full overflow-auto px-2 py-1 overflow-hidden"},J={class:"grid grid-cols-2 lg:w-3/5 gap-3"},L={class:"flex flex-col gap-2"},M={class:"flex flex-col gap-2"},O=["model-value"],K={class:"flex justify-end"},Q={class:"w-full flex-1 flex flex-col h-full bg-white rounded-md shadow-sm border overflow-hidden"},W={class:"flex justify-end px-3 py-3.5 border-t border-gray-200 dark:border-gray-700"},m=20,se=N({__name:"nhaplieu",setup(X){const x=[{key:"STT",label:"STT",class:"w-[60px]"},{key:"Câu Hỏi",label:"Câu Hỏi",sortable:!0,class:"w-[200px]"},{key:"Dạng",label:"Dạng",sortable:!0,class:"w-[150px]"},{key:"Đáp Án",label:"Đáp Án",sortable:!0,class:"w-[200px]"},{key:"Giải pháp",label:"Giải pháp",class:"w-[300px]"},{key:"Đường dẫn",label:"Đường dẫn"}],r=S(),o=z({code:void 0,class:void 0,types:void 0,file:void 0,excercies:[]}),n=G(1),g=t=>{const e=new FileReader,c=t.target.files[0];e.onload=d=>{const u=d.target.result,_=E(u);o.excercies=[..._]},e.readAsText(c),o.file=c},b=P(()=>{var e;return(e=o.excercies)==null?void 0:e.slice((n.value-1)*m,n.value*m)}),v=h.object({code:h.string().min(3,"Phải nhiều hơn 3 ký tự")}),w=t=>{const e=[];return t.code||e.push({path:"code",message:"Vui lòng nhập mã đề"}),e};async function y(t){if(!o.file){r.add({title:"Bạn chưa tải file csv",timeout:3e3});return}const e={code:t.data.code,excercies:{...t.data.excercies}};$fetch("/api/exam/add",{method:"POST",body:e}).then(()=>{r.add({title:"Đã tạo dữ liệu thành công",timeout:3e3})}).catch(c=>{r.add({title:"Lỗi",timeout:3e3})})}return(t,e)=>{var f;const c=B,d=j,u=R,_=F,T=A,k=C,V=U;return D(),$("div",I,[s(T,null,{default:i(()=>[s(_,{schema:a(v),state:a(o),validate:w,onSubmit:y,class:"flex flex-col gap-2"},{default:i(()=>[l("div",J,[l("div",L,[s(d,{label:"Mã đề",name:"code","eager-validation":"",required:""},{default:i(()=>[s(c,{modelValue:a(o).code,"onUpdate:modelValue":e[0]||(e[0]=p=>a(o).code=p),placeholder:"Nhập mã đề"},null,8,["modelValue"])]),_:1})]),l("div",M,[s(d,{label:"Tải lên file csv",name:"file","eager-validation":""},{default:i(()=>[l("input",{"model-value":a(o).file,onChange:g,type:"file",accept:"*",size:"sm",class:"block w-full border rounded-md border-gray-300 text-sm text-gray-4000 file:h-full h-8 file:rounded-s-md file:border-0 file:text-sm file:font-semibold file:bg-[#22c55e] file:text-white hover:file:bg-[#16a34a]"},null,40,O)]),_:1})])]),l("div",K,[s(u,{type:"submit",class:"h-fit w-fit px-2"},{default:i(()=>[H("Thêm bộ câu hỏi")]),_:1})])]),_:1},8,["schema","state"])]),_:1}),l("div",Q,[s(k,{"sort-asc-icon":"i-heroicons-arrow-up-20-solid","sort-desc-icon":"i-heroicons-arrow-down-20-solid",class:"relative","sort-button":{icon:"i-heroicons-sparkles-20-solid",color:"primary",variant:"outline",size:"2xs",square:!1},columns:x,rows:a(b)},null,8,["rows"]),l("div",W,[s(V,{modelValue:a(n),"onUpdate:modelValue":e[1]||(e[1]=p=>q(n)?n.value=p:null),"page-count":m,total:(f=a(o).excercies)==null?void 0:f.length},null,8,["modelValue","total"])])])])}}});export{se as default};
